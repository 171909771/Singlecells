---
title: "sankey with proportion"
author: "WCL"
date: '2022-10-29'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown


```{r}
library(reshape2)
library(ggalluvial)
load('tmp.RData')
head(data7)
## 转换为长数据
test1=melt(data7,id.vars = 'names')
test1$value=as.factor(test1$value)
head(test1)

## 出图
ggplot(test1,
       aes(x = variable, stratum = value, alluvium = names,
           fill = value, label = value)) +
  scale_fill_brewer(type = "qual", palette = "Set2") +
  geom_flow() +
  geom_stratum() +
  theme(legend.position = "bottom") +
  ggtitle("student curricula across several semesters")
```
